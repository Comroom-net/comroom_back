{% extends "base.html" %} {% block nav-home %} active 
{% endblock nav-home %} {% block contents %}
<div class="row mt-5">
  <div class="col-12">
    <h2>Hello {{username|default:"Stranger"}}</h2>
    {% if username %}
    <p>{{request.build_absolute_uri}}comroom?school={{school}}&s_code={{s_code}}</p>
    <a
      href="{{request.build_absolute_uri}}comroom?school={{school}}&s_code={{s_code}}"
      class="btn btn-primary"
      role="button"
      >시간표</a
    >
    <button class="copy btn btn-primary">링크 복사</button>
    <div class="dropdown" style='display:inline-block;'>
      <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        관리자 메뉴
      </button>
      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" >
        <a class="dropdown-item" href="comroom_admin/">컴퓨터실 정보 수정</a>
        <a class="dropdown-item disabled" href="#">시간표 수정</a>
        
      </div>
    </div>
    <a href="logout/" class="btn btn-secondary" role="button">로그아웃</a>

    {% else %}
    {% if s_code %}
    <a
      href="{{request.build_absolute_uri}}comroom?school={{school}}&s_code={{s_code}}"
      class="btn btn-primary"
      role="button"
      >시간표</a
    >
    {% endif %}
    <a href="login/" class="btn btn-primary" role="button">관리자 로그인</a>
    <a href="register/" class="btn btn-primary" role="button">관리자 등록</a>

    {% endif %}
    
  </div>
</div>

<div class="row mt-5">
  <div class="col-12">
    <ul>
    {% for notice in notices %}
      <li>{{notice.context|safe}} <small class="text-muted">- {{notice.reg_date|date:"y.n.j"}}</small></li>
    {% endfor %}
      
    </ul>
  </div>
</div>
<script>
  document.querySelector(".copy").addEventListener("click", function() {
    var tempElem = document.createElement("textarea");
    tempElem.value = "{{request.build_absolute_uri}}comroom?school={{school}}&s_code={{s_code}}";
    document.body.appendChild(tempElem);

    tempElem.select();
    document.execCommand("copy");
    document.body.removeChild(tempElem);
  });
</script>
{% endblock contents %}
